---
layout: post
title: "21. 04. 26. TIL"
date: 2021-04-26
category: read 
excerpt: ""


---

# 21. 04. 26. TIL

> 오늘 한 일  
    1. 날씨 앱 프로젝트: 현재 위치 요청  
    2. 네트워크 7강: Transport Layer (3)  
    3. 알고리즘 3문제  
    4. iOS Interview 1개 내용 정리  

## New knowledge

---

- Adding Location Services to Your App
    - 사용할 ViewController에서 CoreLocation을 import한다.

        ```swift
        import CoreLocation
        ```

    - CLLocationManager 프로퍼티를 선언한다.

        ```swift
        class ViewController: UIViewController {
            let locationManager = CLLocationManager()
        }
        ```

    - 사용하고자 하는 객체를 대리자(Delegate)로 설정하고, 필요한 메서드, 프로퍼티를 정의한다.

        ```swift
        override func viewDidLoad() {
            super.viewDidLoad()
            
            locationManager.delegate = self
            // 위치의 정확도를 CLLocationAccyracy 타입으로 정의한다.
            locationManager.desiredAccuracy = kCLLocationAccuracyBest
            // 위치를 사용할 때, 사용자에게 권한을 요청한다.
            locationManager.requestWhenInUseAuthorization()
            // 아래 메서드를 이용해서, 현재 위치를 요청한다.
            locationManager.requestLocation()
        }
        ```

        정의된 메서드를 보면 권한 / 위치 요청이 문제없이 해결될 것 같지만 아직 부족한 것이 있다.

    - info.plist에 Privacy - Location When In Use Usage Description 열을 추가한다.  
        ![https://user-images.githubusercontent.com/46529663/116101194-98bbcc80-a6e8-11eb-9346-1fb6828e0e06.png](https://user-images.githubusercontent.com/46529663/116101194-98bbcc80-a6e8-11eb-9346-1fb6828e0e06.png)
  
        위와 같이 열을 추가하고, 권한 요청 시 출력할 String을 작성한다.  
        
        참고자료  
        [Apple Developer Documentation: Adding Location Services to Your App](https://developer.apple.com/documentation/corelocation/adding_location_services_to_your_app)  

- 하나의 View Controller 코드에서 여러 TableView Controller 역할을 해야 할 경우 어떻게 구분해서 구현해야 하는 지 설명하시오.
    - 각 테이블 뷰에 대한 위임자와 데이터 소스를 설정해준다.

        ```swift
        class ViewController: UIViewController {
            @IBOutlet weak var firstTableView: UITableView!
            @IBOutlet weak var secondTableView: UITableView!

            override func viewDidLoad() {
                super.viewDidLoad()

                firstTableView.delegate = self
                firstTalbeView.dataSource = self
                secondTableView.delegate = self
                secondTalbeView.dataSource = self
            }
        }
        ```

    - 데이터 소스 메서드를 구현한다.(여기서 두 가지 방법으로 나뉜다.)  

        첫 번째 방법: IBOutlet으로 정의한 테이블 뷰 이름으로 구별하여 구현한다.

        ```swift
        extension ViewController: UITableViewDataSource, UITableViewDataSource {
            func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
                if tableView == firstTableView {
                    // 첫 번째 테이블 뷰의 섹션 별 열 개수
                    return 5
                }
                if tableView == secondTableView {
                    // 두 번째 테이블 뷰의 섹션 별 열 개수
                    return someArray.count
                }
            func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
                let cell = tableView.dequeueReusableCell(withIdentifier: "cell", for: indexPath)
                if tableView == firstTableView {
                    cell.textLabel?.text = "First TableView"
                }
                if tableView == secondTableView {
                    cell.textLabel?.text = "Second Lable"
                }
                return cell
            }
        }
        ```

        두 번째 방법: tag로 구분한다.

        ```swift
        // ViewController 내부
        override func viewDidLoad() {
                super.viewDidLoad()

                firstTableView.delegate = self
                firstTalbeView.dataSource = self
                secondTableView.delegate = self
                secondTalbeView.dataSource = self

                firstTableView.tag = 1
                bottomTableView.tag = 2
        }

        // ViewController 외부
        extension ViewController: UITableViewDataSource, UITableViewDataSource {
            func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
                if tableView.tag == 1 {
                    // 첫 번째 테이블 뷰의 섹션 별 열 개수
                    return 5
                }
                if tableView.tag == 2 {
                    // 두 번째 테이블 뷰의 섹션 별 열 개수
                    return someArray.count
                }
            func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
                let cell = tableView.dequeueReusableCell(withIdentifier: "cell", for: indexPath)
                if tableView.tag == 1 {
                    cell.textLabel?.text = "First TableView"
                }
                if tableView.tag == 2 {
                    cell.textLabel?.text = "Second Lable"
                }
                return cell
            }
        }
        ```

        - StoryBoard로 테이블뷰를 2개 이상 구현하면, 셀 ID를 인식하지 못하기 때문에 셀을 register 해준다.

            ```swift
            override func viewDidLoad() {
                super.viewDidLoad()

                firstTableView.delegate = self
                firstTalbeView.dataSource = self
                secondTableView.delegate = self
                secondTalbeView.dataSource = self

                firstTableView.register(UITableViewCell.self, forCellReuseIdentifier: "cell")
                secondTableView.register(UITableViewCell.self, forCellReuseIdentifier: "cell")
            }
            ```
