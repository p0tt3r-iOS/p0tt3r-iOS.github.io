---
layout: post
title: "21. 04. 16. TIL"
date: 2021-04-16
category: read 
excerpt: ""


---

# 21. 04. 16. TIL

> 오늘 한 일  
    Core Data Stack 내용 정리 & 이해

## New Knowledge

---

- Core Data Stack  
    아래 내용은 [[iOS-Framework] 코어 데이터(Core Data) (3)](https://p0tt3r-ios.github.io/2021/04/16/iOS-Framework-Core-Data-(3)) 포스트의 일부 내용입니다.  
    
    - Core Data는 앱의 모델 계층을 관리, 유지하기 위해 몇가지 클래스를 제공합니다.    
        이러한 클래스를 통틀어 Core Data Stack이라 하는데, 아래와 같습니다.  
        
        1. NSManagedObjectModel: Core Data Stack에서 접근할 데이터를 나타냅니다.  
        
        2. NSManagedObjectContext  
            - 위 객체는 앱이 가장 많이 상호작용하는 객체이며, 앱 전체에 노출됩니다.  
            - 영구 저장소에서 객체를 가져올 때, 임시 복사본으로 가져와 수정할 수 있고 저장하지 않는 한 영구 저장소의 데이터는 변경되지 않습니다.  
            - 모든 managed objects는 managed object context에 등록되어야 합니다.  
                컨텍스트(Context)를 사용하여 개체 그래프에 개체를 추가하고, 삭제할 수 있습니다.  
            - 컨텍스트는 각 개체의 Attrubutes와 개체 간의 관계의 변경 사항을 추적합니다.  
                추적을 통해 컨텍스트는 undo(뒤로가기)와 redo(다시하기) 기능을 제공할 수 있습니다.  
                
        3. NSPersistentStoreCoordinator  
            - 영구 저장소(NSPersistentStore)에서 앱 타입의 인스턴스를 저장하고, 가져옵니다.  
                (영구 저장소는 디스크에 있을 수도, 메모리에 있을 수도 있습니다)  
            - NSManagedObjectModel 개체가 초기화 된 후 생성됩니다.  
            - 위 객체는 영구 저장소에서 데이터를 인식하면  
                해당 데이터를 요청하는 NSManagedObjectContext로 전달합니다.  
            - NSPersistentStore을 추가하는 호출은 비동기적으로 수행됩니다.  
                (동기적 수행 시, 예외상황에서 UI 스레드를 멈춰버리는 등의 상황이 발생할 수 있음)  
                
        4. NSPersistentContainer  
            - Core Data Stack 생성을 처리합니다.  
                (Model, Context, Coordinator을 한 번에 설정합니다.)  
            - NSManagedObjectContext에 대한 접근과 여러 편리한 메서드를 제공합니다.  
            
        위 Core Data Stack을 이해 해야 어떻게 Core Data가 앱과 상호작용하고,  
        데이터를 주고 받는 지 알 수 있다.  
  
        우선 개요(내용 정리)를 하고 아래에 구현 코드를 적으니, 정리가 되고 좋은 것 같다.  

## New Experience

---

- 집중력 저하  
    오늘은 거의 5시간도 집중하지 못한 것 같다.  
    그래서 오늘은 다른 목표들이 있었음에도 Core Data, 그것도 한 개 포스트 분량의 내용 밖에 공부하지 못했다.  
  
    앉아있는 동안, 찾아보는 동안, 시간은 계속 흘러가지만 집중을 제대로 하지 못해서 너무 아쉽다.  
  
    내일은 한 주의 마지막 날인 만큼, 힘내서 더 열심히 하루를 보내길 바란다.  
