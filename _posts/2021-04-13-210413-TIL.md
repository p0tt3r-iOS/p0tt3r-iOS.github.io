---
layout: post
title: "21. 04. 13. TIL"
date: 2021-04-13
category: read 
excerpt: ""


---

# 21. 04. 13. TIL

> 오늘 한 일  
    1. 개인 프로젝트 Notification 구현  
    2. Data Structures & Algorithms in Swift, Chapter 4

## New Knowledge
---
- UNUserNotificationCenter  
    - 공식문서: The central object for managing notification-related activities for your app or app extension.  
    - 앱에서 알림과 관련된 활동을 관리하는 중심 객체  
        (Overview에 shared로 사용한다는 내용이 있는 걸 보면 싱글톤으로 사용하는 듯)

- CollectionVIewCell의 width를 스크린 사이즈별로 다르게 적용  

    ```swift
    func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -> UICollectionViewCell {
        let cell = collectionView.dequeueReusableCell(withReuseIdentifier: "dayCell", for: indexPath) as! PlanCollectionViewCell
       
    		// 각 셀의 width constraint를 스크린 width / 12로 적용
        cell.widthAnchor.constraint(equalToConstant: UIScreen.main.bounds.width / 12).isActive = true
    		
    		return cell
    }
    ```

    스크린 사이즈에 맞춰서 사용하면 된다고 생각했는데, collectionVIew에 Constraint를 적용하고,  
    컬렉션 뷰 width에 따라 다른 cell width를 적용하는 게 더 편할 듯 하다.

- CollectionViewCell의 width를 각 디바이스 별 collectionView 크기에 따라 변경

    ```swift
    // 아래 인셋을 조정하는 방법까지 3가지 방법 중 이게 가장 나은 듯
    func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -> UICollectionViewCell {
        let cell = collectionView.dequeueReusableCell(withReuseIdentifier: "dayCell", for: indexPath) as! PlanCollectionViewCell
            
        // 4s, SE, 8은 일주일씩 표현이 안돼서 기기별로 셀 크기를 바꿈
        if collectionView.frame.width < 300 { // 4s
            cell.widthAnchor.constraint(equalToConstant: collectionView.frame.width / 11).isActive = true
        } else if collectionView.frame.width < 350 { // SE, 8
            cell.widthAnchor.constraint(equalToConstant: collectionView.frame.width / 10.5).isActive = true
        } else {
            cell.widthAnchor.constraint(equalToConstant: collectionView.frame.width / 10).isActive = true
        }

        return cell
    }
    ```

- CollectionView의 Spacing / Inset은 UICollectionViewFlowLayout을 통해 조정한다.

    ```swift
    // Interface Builder에서 연결한 FlowLayout
    @IBOutlet weak var collectionViewFlowLayout: UICollectionViewFlowLayout!

    // minimumInteritemSpacing을 통해 스크린 width가 350이하일 떄, 
    // 셀 간 스페이싱 거리를 조절
    override func viewDidLoad() {
    		if UIScreen.main.bounds.width < 350 {
    				collectionViewFlowLayout.minimumInteritemmSpacing = 10
    		}
    }
    ```

    UICollectionViewFlowLayout.minimumInteritemSpacing: CGFloat  
    - The minimum spacing to use between items in the same row.
        같은 열의 아이템(셀) 간의 최소 거리를 나타내는 프로퍼티

- UIView.frame.width & UIView.frame.size.width  
    컬렉션 뷰의 width를 get하는 방법을 찾다가 frame.width와 frame.size.width의 차이를 봤다.  
    엄밀히 말하면 CGRect 타입의 width인지 size.width인지의 차이인데,  
    width는 { get }으로 구현되어서 getter 역할만 하기 때문에 값을 바꿀 수 없고,  
    size.width는 일반적인 저장 프로퍼티이기 때문에 가져오는 것도, 수정하는 것도 가능하다.  
    나는 width를 가져오기만 하면 되니, width를 사용하려 하는데,  
    이걸 이렇게 나눠 놓은 이유는 width 값을 보호하기 위함인가?  
    참고자료: [iOS ) frame.height VS frame.size.height](https://zeddios.tistory.com/242)

- String내 에서 특정 위치의 Character 또는 String 가져오기  
    1. extension을 통해 String에 subscript 추가하기

        ```swift
        extension String {

            var length: Int {
                return count
            }

            subscript (i: Int) -> String {
                return self[i ..< i + 1]
            }

            func substring(fromIndex: Int) -> String {
                return self[min(fromIndex, length) ..< length]
            }

            func substring(toIndex: Int) -> String {
                return self[0 ..< max(0, toIndex)]
            }

            subscript (r: Range<Int>) -> String {
                let range = Range(uncheckedBounds: (lower: max(0, min(length, r.lowerBound)),
                                                    upper: min(length, max(0, r.upperBound))))
                let start = index(startIndex, offsetBy: range.lowerBound)
                let end = index(start, offsetBy: range.upperBound - range.lowerBound)
                return String(self[start ..< end])
            }
        }

        let str = "abcdef"
        str[1...3] // "bcd"
        str[5]     // "f"
        str[80]    // ""
        str.substring(fromIndex: 3) // "def"
        str.substring(toIndex: str.length - 2) // "abcd"

        // 마지막 subscript에 보면 반환 값이 String(self[start ..< end])로 끝나는데,
        // 이 떄문에 ..< 이외에는 사용이 안됨(예를 들어 toIndex 메서드)
        // ... range를 사용하려면 몇가지 더 추가하거나 ..< 만 사용해야 할 듯
        ```

    2. Array에 넣어서(init) subscript 사용하기(이건 한 문자만 가능)

        ```swift
        var first = Array(str)[0] // "a"
        ```

- UUID란?
    - 임의 생성한 고유 값(범용 고유 식별자)  
    - 네트워크 상의 서로 모르는 객체들을 식별 / 구별하기 위해선 고유한 이름이 필요하고,  
        UUID를 이용해 이름을 부여하면 완벽하지는 않지만 중복될 가능성이 거의 없는 이름을 부여할 수 있다.  
    - iOS의 UUID 사용 매커니즘: 앱을 처음 실행하면 UUID를 생성하여 그 값을 앱 내부에 저장한다.  
        (원할 경우, 서버에도 저장할 수 있고 필요할 때 마다 출력할 수 있다.)
